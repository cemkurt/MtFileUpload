var FileTypes,ErrorTypes,MtFileUpload;(function(n){n[n.xls=0]="xls";n[n.xlsx=1]="xlsx";n[n.pdf=2]="pdf";n[n.doc=3]="doc";n[n.docx=4]="docx";n[n.txt=5]="txt";n[n.xml=6]="xml";n[n.png=7]="png";n[n.jpg=8]="jpg";n[n.gif=9]="gif";n[n.tif=10]="tif";n[n.jpeg=11]="jpeg";n[n.image=12]="image"})(FileTypes||(FileTypes={})),function(n){n[n.FileSizeError=0]="FileSizeError";n[n.FileTypeError=1]="FileTypeError"}(ErrorTypes||(ErrorTypes={}));MtFileUpload=function(){function n(n){this.inputName=n;this.mtImgPreview="mtImgPreview";this.options={maxSize:4194304,types:[FileTypes.image],inputReplacementTemplate:"<button type='button' class='btn btn-primary' id='MtFileUpload'>Dosya Seç...<\/button>",previewImgTemaplte:"<img alt='' class='img-thumbnail "+this.mtImgPreview+"' />"};this.inputName=n;this.initDom();this.bindEvents()}return n.prototype.initDom=function(){var n,t;console.log($(this.inputName));n=$(this.inputName);n.after(this.options.inputReplacementTemplate);n.css("position","absolute");n.css("left","-9999999px");t="#"+$(this.options.inputReplacementTemplate).attr("id");console.log(t);$(t).on("click",function(){n.trigger("click")})},n.prototype.bindEvents=function(){var t=$(this.inputName),n=this;$(t).on("change",function(){var i,r,t,u;if($(n.options.previewContainer).html(""),n.checkFileValidity(this.files,n.options.types)&&(i=new FileReader,n.options.types.some(function(n){return n>=FileTypes.png})&&(i.onload=function(t){var i=$(n.options.previewImgTemaplte).attr("src",t.target.result.toString());$(n.options.previewContainer).append(i)},this.files.length>0))){for(r="<ul><\/ul>",t=0;t<this.files.length;t++)this.files[t].type.indexOf("image/")>=0&&i.readAsDataURL(this.files[t]),u="<li>"+this.files[t].name+"<\/li>",$(r).append(u);$(n.options.previewContainer).append(r)}})},n.prototype.checkFileValidity=function(n,t){var i,r,u,f;if(File&&FileReader&&FileList&&window.Blob){for(i=0;i<n.length;i++)if(n[i]){if(r=n[i],u=!1,Object.prototype.toString.call(t)==="[object Array]")for(f=0;f<t.length;f++)if(u=this.typeCheck(r.type,t[f]),!u)break;if(u)this.removeError();else return this.addError(ErrorTypes.FileTypeError,r.name),!1;if(r.size>this.options.maxSize)return this.addError(ErrorTypes.FileSizeError,r.name),!1;u||this.removeError()}else return this.removeError(),!1;return!0}},n.prototype.addError=function(n,t){var f=this.inputName.substr(1),r=this.options.errorMessageContainer,u,i;(r===undefined||r===null)&&(r='span[data-valmsg-for="'+f+'"]');u=$(r);u.removeClass("field-validation-valid").addClass("field-validation-error");i="";n===ErrorTypes.FileSizeError?($(u).text().length>0&&(i+="<br/>"),i+='"'+t+'": Doküman en fazla '+this.parseFileSize(this.options.maxSize)+" olmalıdır."):n===ErrorTypes.FileTypeError&&(i+='"'+t+'": Dosya türü hatalı! (kabul edilen dosya tür(ü/leri): "'+this.options.types.map(function(n){return FileTypes[n]}).join(",")+'").<br/>');u.html(i);$(this.inputName).val("")},n.prototype.removeError=function(){var i=this.inputName.substr(1),n=this.options.errorMessageContainer,t;(n===undefined||n===null)&&(n='span[data-valmsg-for="'+i+'"]');t=$(n);t.removeClass("field-validation-error").addClass("field-validation-valid").html("")},n.prototype.parseFileSize=function(n){var t=1024,r,i;if(n<t)return n+" B";r=["KB","MB","GB"];i=-1;do n/=t,++i;while(n>=t);return n.toFixed(1)+" "+r[i]},n.prototype.typeCheck=function(n,t){switch(t){case FileTypes.xls:case FileTypes.xlsx:return n.indexOf("officedocument.spreadsheetml.sheet")>=0||n.indexOf("vnd.ms-excel")>=0;case FileTypes.pdf:return n.indexOf("application/pdf")>=0;case FileTypes.doc:case FileTypes.docx:return n.indexOf("application/msword")>=0||n.indexOf("vnd.ms-word")>=0||n.indexOf("officedocument.wordprocessingml.document")>=0;case FileTypes.png:case FileTypes.jpg:case FileTypes.gif:case FileTypes.jpeg:case FileTypes.tif:case FileTypes.image:return n.indexOf("image/")>=0&&n.indexOf("ico")===-1;default:return!1}},n.prototype.post=function(){},n}();